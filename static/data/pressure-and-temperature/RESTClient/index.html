<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script>
  $(document).ready(function (){
      console.log("JQuery ready");
      $("#button").button();
      $("#button").click(()=>{
        console.log("Handling click");

        var method= $("input[type=radio]:checked").attr("id");

        var request= $.ajax({
          url:$("#url").val(),
          type:method,
          data: $("#payload").val(),
          contentType : "application/json"
        });

        request.done(function(data,status,jqXHR) {
          $("#data").text(JSON.stringify(data));
          $("#status").html(jqXHR.status);
          $("#log").html(jqXHR.statusText);
        });

        request.always(function(jqXHR, status) {
          if(status == "error"){
            $("#status").html(jqXHR.status);
            $("#log").html(jqXHR.statusText);
            $("#data").html("");
          }
        });
      });
  });
  </script>
</head>
<body>
  <div class="container">
    <div class="panel panel-success">
      <div class="panel-heading">JQuery RESTClient</div>
      <div class="panel-body">
            URL: <input id="url" size="30" value="/api/v1/pressure-and-temperatures?apikey=sos"/>
            GET <input name="method" type="radio" id="GET" checked="checked"/> &nbsp;&nbsp;
            POST <input name="method" type="radio" id="POST" /> &nbsp;&nbsp;
            PUT <input name="method" type="radio" id="PUT" /> &nbsp;&nbsp;
            DELETE <input name="method" type="radio" id="DELETE" /> &nbsp;&nbsp;
        <br/>
        Payload: <input id="payload" size="60" value='{"name": "Sevilla","month": "Enero","year": 2015,"p": 879,"t": 9.8,"td": 3.1}'/>
        <br/><br/>
        <span id="button">Send</span>
        <br/><hr/>
        HTTP Status: <span id="status"></span>
        <br/><hr/>
        <span id="data"></span>
        <br/><hr/>
        Log: <span id="log"></span>
      </div>
    </div>
  </div>
</body>
</html>
